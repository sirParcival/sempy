{% extends 'base.html' %}
{% load static %}
{% block content %}
    {% if user.is_student %}

        <p>Hola student {{ user.first_name }}</p>


    {% elif user.is_teacher%}


            <p>Hola teacher {{ user.first_name }}</p>


            {% if user.is_headteacher %}
                {% block add_school_users %}
                <a href="{% url 'upload' %}">Add</a>

                {% endblock %}
            {% endif %}

        {% block my_group %}
            <p>Please make sure you are using only letters or digits and signs "_", "-"</p>
            <form method="post">
                {% csrf_token %}
                {{ form }}
                <input type="submit" value="Add group"/>
            </form>

        {% endblock %}

        <div class="my_groups">
            <ul>
                {% for group_request in group_requests %}
                        <li class="group_request">{{ group_request }} to {{ group_request.to_group.name }}
                            <form>
                                <button class="handle_request" formaction="{% url 'add' group_request.id%}">Accept</button>
                                <button class="handle_request" formaction="{% url 'decline' group_request.id%}">Decline</button>
                            </form>
                        </li>


                {% endfor %}
            </ul>


        </div>




    {% endif %}
    <div id="user_groups">
        <ul>
        {% for group in groups %}
            <li>
                <a href="{% url 'group_detailed_view' group.name group.id group.creator.id%}">
                    {{ group }}
                </a>
                <form>
                    {% if user.id == group.creator.id %}
                        <label>
                    	    <input type="text" placeholder="New name" name="new_name"/>
                        </label>
                        <button class="group_handler" formaction="{% url 'edit_group' group.id%}">Edit</button>
                        <button class="group_handler" formaction="{% url 'delete_group' group.id%}">Delete</button>
                    {% endif %}
                </form>

            </li>
        {% endfor %}

        </ul>
    </div>
        <script src="{% static 'javascript/group_handler.js' %}"></script>
    <ul>
    {% for school_group in school_groups %}
        <li>
            <a href="{% url 'group_detailed_view' school_group.name school_group.id school_group.creator.id %}">
                {{ school_group }}
            </a>
        </li>
    {% endfor %}

    </ul>

<a href="{% url 'logout' %}">Log out</a>




{% endblock %}
